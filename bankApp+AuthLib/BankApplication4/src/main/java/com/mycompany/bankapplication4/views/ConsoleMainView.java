package com.mycompany.bankapplication4.views;import com.mycompany.authlib.controller.AuthController;import com.mycompany.authlib.views.ConsoleAuthView;import com.mycompany.authlib.views.IAuthView;import com.mycompany.bankapplication4.contexts.ApplicationContext;import com.mycompany.bankapplication4.controllers.ATMController;import com.mycompany.bankapplication4.controllers.CardAuthController;import com.mycompany.bankapplication4.controllers.NetBankingController;import com.mycompany.bankapplication4.enums.MainOption;import com.mycompany.bankapplication4.models.cards.Card;import com.mycompany.bankapplication4.models.users.User;import com.mycompany.bankapplication4.utils.ConsoleIOUtil;public class ConsoleMainView implements IMainView {    private final ConsoleIOUtil ioHandler;    private final ApplicationContext context;        private boolean running;        public ConsoleMainView() {        ioHandler = new ConsoleIOUtil();        this.context = ApplicationContext.getInstance();    }        @Override    public void runMainView() {        running = true;        while(running) {            MainOption choice = getMainChoice();            switch(choice) {                case REGISTER -> handleRegistration();                case LOGIN -> handleLogin();                case CARD -> handleCard();                case EXIT -> stopRun();                case INVALID -> handleInvalidChoice();            }        }    }    private MainOption getMainChoice() {        System.out.println("1. New User Registration");        System.out.println("2. Net Banking Login");        System.out.println("3. Use Card");        System.out.println("0. Exit");                return switch(ioHandler.readInt("Enter choice: ")) {            case 1 -> MainOption.REGISTER;            case 2 -> MainOption.LOGIN;            case 3 -> MainOption.CARD;            case 0 -> MainOption.EXIT;            default -> MainOption.INVALID;        };    }        @Override    public void handleRegistration() {        IAuthView authView = new ConsoleAuthView(new AuthController(context.getUserRepository(), context.getUserFactory()));        authView.handleRegistration();       }        @Override    public void handleLogin() {        IAuthView authView = new ConsoleAuthView(new AuthController(context.getUserRepository(), context.getUserFactory()));        User user = (User) authView.handleLogin();        if(user == null) return;        INetBankingView netBankingView = new ConsoleNetBankingView(new NetBankingController(user, context.getAccountRepository(), context.getCardRepository()));        netBankingView.runNetBankingView();    }        @Override    public void handleCard() {        IATMAuthView atmAuthView = new ConsoleATMAuthView(new CardAuthController(context.getCardRepository()));        Card card = atmAuthView.handleATMAuth();        if(card == null) return;        IATMView atmView = new ConsoleATMView(new ATMController(card));        atmView.runATMView();    }        @Override    public void stopRun() {        running = false;        System.out.println("Exiting the Application");    }        @Override    public void handleInvalidChoice() {        ioHandler.displayError("Invalid Choice.");    }}