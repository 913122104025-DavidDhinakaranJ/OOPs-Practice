package com.mycompany.bankapplication4.controllers;import com.mycompany.bankapplication4.exceptions.AccountNotFoundException;import com.mycompany.bankapplication4.exceptions.AccountNotOwnedByUserException;import com.mycompany.bankapplication4.exceptions.InsufficientAmountException;import com.mycompany.bankapplication4.models.User;import com.mycompany.bankapplication4.models.accounts.BankAccount;import com.mycompany.bankapplication4.models.accounts.CurrentAccount;import com.mycompany.bankapplication4.models.accounts.SavingsAccount;import com.mycompany.bankapplication4.models.cards.CreditCard;import com.mycompany.bankapplication4.models.cards.DebitCard;import com.mycompany.bankapplication4.repositories.IAccountRepository;import com.mycompany.bankapplication4.repositories.ICardRepository;import java.util.ArrayList;import java.util.List;public class NetBankingController implements INetBankingController {    private final User user;    private final IAccountRepository accounts;    private final ICardRepository cards;    public NetBankingController(User user, IAccountRepository accountRepository, ICardRepository cardRepository) {        this.accounts = accountRepository;        this.cards = cardRepository;        this.user = user;    }        @Override    public List<BankAccount> getAccountsList() {        List<BankAccount> userAccounts = new ArrayList<>();        for(String accNo : user.getAccountNumbers()) {            userAccounts.add(accounts.findAccount(accNo));        }                return userAccounts;    }        @Override    public String createSavingsAccount(double initialAmount) {        SavingsAccount account = new SavingsAccount(initialAmount, user.getUserId());        saveAccount(account);        return account.getAccNo();    }        @Override    public String createCurrentAccount(double initialAmount) {        CurrentAccount account = new CurrentAccount(initialAmount, user.getUserId());        saveAccount(account);        return account.getAccNo();    }        private void saveAccount(BankAccount account) {        accounts.saveAccount(account);        user.addAccount(account.getAccNo());    }    @Override    public String issueCreditCard(int pin) {                CreditCard card = new CreditCard(pin, user);        cards.saveCard(card);        return card.getCardNo();    }    @Override    public String issueDebitCard(String accNo, int pin) throws AccountNotOwnedByUserException {        if(!user.hasAccount(accNo)) {            throw new AccountNotOwnedByUserException();        }                BankAccount account = accounts.findAccount(accNo);        DebitCard card = new DebitCard(account, pin);        cards.saveCard(card);        return card.getCardNo();    }    @Override    public void transferFund(String from, String to, double transferAmount) throws AccountNotOwnedByUserException, AccountNotFoundException, InsufficientAmountException {                if(!user.hasAccount(from)) {            throw new AccountNotOwnedByUserException();        }                        BankAccount fromAccount = accounts.findAccount(from);        BankAccount toAccount = accounts.findAccount(to);                if(toAccount == null) {            throw new AccountNotFoundException();        }                        if(fromAccount.deduct(transferAmount)) {            toAccount.deposit(transferAmount);        } else {            throw new InsufficientAmountException();        }    }    @Override    public double getBalance(String accNo) {        return accounts.findAccount(accNo).getBalance();    }}