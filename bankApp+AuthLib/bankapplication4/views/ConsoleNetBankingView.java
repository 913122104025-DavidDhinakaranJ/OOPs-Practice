package com.mycompany.bankapplication4.views;import com.mycompany.bankapplication4.controllers.INetBankingController;import com.mycompany.bankapplication4.enums.AccountType;import com.mycompany.bankapplication4.enums.CardType;import com.mycompany.bankapplication4.enums.NetBankingOption;import com.mycompany.bankapplication4.exceptions.AccountNotFoundException;import com.mycompany.bankapplication4.exceptions.AccountNotOwnedByUserException;import com.mycompany.bankapplication4.exceptions.InsufficientAmountException;import com.mycompany.bankapplication4.models.accounts.BankAccount;import com.mycompany.bankapplication4.utils.ConsoleIOUtil;import java.util.List;public class ConsoleNetBankingView implements INetBankingView {    private final ConsoleIOUtil ioHandler;    private final INetBankingController netBankingController;        private boolean login;        public ConsoleNetBankingView(INetBankingController netBankingController) {        ioHandler = new ConsoleIOUtil();        this.netBankingController = netBankingController;    }        @Override    public void runNetBankingView() {        login = true;                while(login) {            NetBankingOption choice = getNetBankingMenuChoice();            switch(choice) {                case LIST_ACCOUNTS -> handleListAccounts();                case CREATE_ACCOUNT -> handleCreateAccount();                case ISSUE_CARD -> handleIssueCard();                case TRANSFER_FUND -> handleTransferFund();                case LOGOUT -> handleLogout();                case INVALID -> handleInvalidChoice();            }        }    }    private NetBankingOption getNetBankingMenuChoice() {        System.out.println("1. My Accounts");        System.out.println("2. Create Account");        System.out.println("3. Get ATM Card");        System.out.println("4. Transfer Funds");        System.out.println("0. Logout");                return switch(ioHandler.readInt("Enter choice: ")) {            case 1 -> NetBankingOption.LIST_ACCOUNTS;            case 2 -> NetBankingOption.CREATE_ACCOUNT;            case 3 -> NetBankingOption.ISSUE_CARD;            case 4 -> NetBankingOption.TRANSFER_FUND;            case 0 -> NetBankingOption.LOGOUT;            default -> NetBankingOption.INVALID;        };    }        @Override    public void handleListAccounts() {        List<BankAccount> accounts = netBankingController.getAccountsList();        if(accounts.isEmpty()) {            System.out.println("No Accounts Found.");        }        else {            System.out.println("My Accounts");            displayAccountList(accounts);        }    }    @Override    public void handleCreateAccount() {        AccountType type = getAccountType();        switch(type) {            case SAVINGS -> handleCreateSavingsAccount();            case CURRENT -> handleCreateCurrentAccount();            case INVALID -> handleInvalidAccountChoice();        }    }        @Override    public void handleCreateSavingsAccount() {        double initialAmount = getInitialDepositAmount();        try {            String accNo = netBankingController.createSavingsAccount(initialAmount);            ioHandler.displaySuccess("Savings account with account number \"" + accNo + "\" is created.");        } catch (InsufficientAmountException e) {            ioHandler.displayError("Initial Amount is less than Minimum balance.");        }    }    @Override    public void handleCreateCurrentAccount() {        double initialAmount = getInitialDepositAmount();                String accNo = netBankingController.createCurrentAccount(initialAmount);        ioHandler.displaySuccess("Current account with account number \"" + accNo + "\" is created.");    }        @Override    public void handleInvalidAccountChoice() {        ioHandler.displayError("Invalid Account Choice");    }    @Override    public void handleIssueCard() {        CardType type = getCardType();        switch(type) {            case CREDIT -> handleIssueCreditCard();            case DEBIT -> handleIssueDebitCard();            case INVALID -> handleInvalidCardChoice();        }    }        @Override    public void handleIssueCreditCard() {        int pin = getPin();                String cardNo = netBankingController.issueCreditCard(pin);        ioHandler.displaySuccess("\"" + cardNo + "\" is your Credit Card number.");    }    @Override    public void handleIssueDebitCard() {        String accNo = getAccountNumber();        int pin = getPin();        try {            String cardNo = netBankingController.issueDebitCard(accNo, pin);            ioHandler.displaySuccess("\"" + cardNo + "\" is your Debit Card number.");        } catch (AccountNotOwnedByUserException e) {            ioHandler.displayError("Account '" + accNo + "' is not owned by you.");        }    }        @Override    public void handleInvalidCardChoice() {        ioHandler.displayError("Invalid Card Choice");    }    @Override    public void handleTransferFund() {        String from = getSenderAccountNumber();        String to = getReceiverAccountNumber();                double transferAmount = getTransferFundAmount();                try {            netBankingController.transferFund(from, to, transferAmount);            ioHandler.displaySuccess("Transfer Successfully completed.");            displayBalance(netBankingController.getBalance(from));        } catch(AccountNotOwnedByUserException e) {            ioHandler.displayError("Account '" + from + "' is not owned by you.");        } catch (AccountNotFoundException e) {            ioHandler.displayError("Account '" + to + "' not found.");        } catch (InsufficientAmountException e) {            ioHandler.displayError("Insufficient Amount to Transfer.");        }    }    @Override    public void handleLogout() {        System.out.println("Logging Out");        login = false;    }    @Override    public void handleInvalidChoice() {        ioHandler.displayError("Invalid Choice.");    }    private AccountType getAccountType() {        System.out.println("1. Savings Account");        System.out.println("2. Current Account");                return switch(ioHandler.readInt("Enter choice for account: ")) {            case 1 -> AccountType.SAVINGS;            case 2 -> AccountType.CURRENT;            default -> AccountType.INVALID;        };    }    private CardType getCardType() {        System.out.println("1. Credit Card");        System.out.println("2. Debit Card");                return switch(ioHandler.readInt("Enter choice for card: ")) {            case 1 -> CardType.CREDIT;            case 2 -> CardType.DEBIT;            default -> CardType.INVALID;        };    }        private String getAccountNumber() {        return ioHandler.readAccountNumber("Enter account number: ");    }    private int getPin() {        return ioHandler.readPin("Set pin: ");    }    private double getInitialDepositAmount() {        return ioHandler.readAmount("Enter initial deposit amount: ");    }        private String getSenderAccountNumber() {        return ioHandler.readAccountNumber("Enter sender account number: ");    }    private String getReceiverAccountNumber() {        return ioHandler.readAccountNumber("Enter receiver account number: ");    }    private double getTransferFundAmount() {        return ioHandler.readAmount("Enter transfer fund amount: ");    }    private void displayAccountList(List<BankAccount> accounts) {        for(BankAccount account : accounts) {            System.out.println("Account Number: " + account.getAccNo() + " Account Type: " + account.getAccountType() + " Balance: " + account.getBalance());        }    }    private void displayBalance(double balance) {        System.out.println("Balance: " + balance);    }}